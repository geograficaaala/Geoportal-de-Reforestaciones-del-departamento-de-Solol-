<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Observatorio Ambiental · Sololá</title>
  <style>
    :root{
      --bg1:#e9fff2; --bg2:#e7f1ff; --bg3:#fff3dc;
      --card:#ffffffcc; --ink:#15322a; --muted:#4b5b57;
      --line: rgba(0,0,0,.08);
      --r: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, Segoe UI, Roboto, Arial;
      color:var(--ink);
      background: linear-gradient(120deg,var(--bg1),var(--bg2),var(--bg3));
      min-height:100vh;
    }
    header{
      padding:18px 18px 0;
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      flex-wrap:wrap;
    }
    .brand h1{margin:0; font-size:18px}
    .brand p{margin:0; color:var(--muted); font-size:13px}
    nav{display:flex; gap:10px; flex-wrap:wrap}
    a.btn{
      text-decoration:none; color:var(--ink);
      background:#fff; border:1px solid var(--line);
      padding:10px 12px; border-radius:14px; font-size:13px;
      box-shadow: 0 6px 20px rgba(0,0,0,.05);
    }
    main{padding:18px; max-width:1100px; margin:0 auto}
    .hero{
      margin-top:10px;
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--r);
      padding:18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      display:grid; grid-template-columns: 1.2fr .8fr; gap:16px;
    }
    .hero h2{margin:0 0 6px; font-size:22px}
    .hero .lead{margin:0; color:var(--muted); line-height:1.4}
    .logos{
      display:flex; gap:10px; justify-content:flex-end; align-items:center; flex-wrap:wrap;
    }
    .logos img{
      height:64px; width:auto; border-radius:12px;
      background:#fff; padding:8px; border:1px solid var(--line);
    }
    .grid{
      margin-top:16px;
      display:grid; grid-template-columns: repeat(3, 1fr); gap:12px;
    }
    .card{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--r);
      padding:14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.05);
    }
    .card h3{margin:0 0 6px; font-size:16px}
    .card p{margin:0 0 10px; color:var(--muted); font-size:13px; line-height:1.35}
    .kpis{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; margin-top:10px}
    .kpi{background:#fff; border:1px solid var(--line); border-radius:14px; padding:10px}
    .kpi .n{font-size:18px; font-weight:700}
    .kpi .t{font-size:12px; color:var(--muted)}
    footer{padding:18px; color:var(--muted); font-size:12px; text-align:center}
    @media (max-width: 900px){
      .hero{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr}
      .logos{justify-content:flex-start}
    }
  </style>
</head>
<body>
<header>
  <div class="brand">
    <h1>Observatorio Ambiental · Sololá</h1>
    <p>Portal público modular (Reforestación y futuros módulos ambientales)</p>
  </div>
  <nav>
    <a class="btn" href="./apps/reforestacion/index.html">Reforestación</a>
    <a class="btn" href="#proximos">Próximos módulos</a>
  </nav>
</header>

<main>
  <section class="hero">
    <div>
      <h2>Reforestación: mapa, indicadores e informes</h2>
      <p class="lead">
        Este portal reúne información geográfica y reportes para apoyar decisiones ambientales en el departamento de Sololá.
        El módulo de Reforestación se alimentará continuamente con boletas KoBoToolbox.
      </p>

      <div class="kpis">
        <div class="kpi"><div class="n" id="k_boletas">—</div><div class="t">Boletas</div></div>
        <div class="kpi"><div class="n" id="k_plantas">—</div><div class="t">Plantas</div></div>
        <div class="kpi"><div class="n" id="k_part">—</div><div class="t">Participantes</div></div>
      </div>

      <p class="lead" style="margin-top:10px;font-size:12px">
        Última actualización: <span id="k_update">—</span>
      </p>
    </div>

    <div class="logos">
      <img src="./assets/img/BOSQUE.png" alt="BOSQUE" onerror="this.style.display='none'">
      <img src="./assets/img/CODEMA%20(2).png" alt="CODEMA" onerror="this.style.display='none'">
    </div>
  </section>

  <section class="grid">
    <div class="card">
      <h3>Módulo: Reforestación</h3>
      <p>Resumen, Geoportal (visor SIG pro), Dashboard e Informes.</p>
      <a class="btn" href="./apps/reforestacion/index.html">Entrar al módulo</a>
    </div>

    <div class="card" id="proximos">
      <h3>Próximos módulos</h3>
      <p>Incendios forestales, fragmentación forestal y otras capas.</p>
      <span class="btn" style="opacity:.6;cursor:default">En construcción</span>
    </div>

    <div class="card">
      <h3>Datos</h3>
      <p>Por ahora usamos datos de prueba. Luego conectamos KoBo con automatización.</p>
      <a class="btn" href="./data/puntos.geojson">Ver puntos</a>
    </div>
  </section>
</main>

<footer>© Observatorio Ambiental Sololá · GitHub Pages</footer>

<script>
  fetch('./data/resumen.json')
    .then(r => r.ok ? r.json() : null)
    .then(j => {
      if(!j) return;
      document.getElementById('k_boletas').textContent = j.kpis?.total_boletas ?? '—';
      document.getElementById('k_plantas').textContent  = j.kpis?.total_plantas ?? '—';
      document.getElementById('k_part').textContent     = j.kpis?.total_participantes ?? '—';
      document.getElementById('k_update').textContent   = j.ultima_actualizacion ?? '—';
    })
    .catch(()=>{});
</script>
</body>
</html>
